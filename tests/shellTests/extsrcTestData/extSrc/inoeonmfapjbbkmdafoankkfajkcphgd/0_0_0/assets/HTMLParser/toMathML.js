MathJax.Hub.Register.LoadHook("[MathJax]/jax/element/mml/jax.js",function(){var a=MathJax.ElementJax.mml;SETTINGS=MathJax.Hub.config.menuSettings,a.mbase.Augment({toMathML:function(a){var b=this.inferred&&this.parent.inferRow;null==a&&(a="");var c=this.type,d=this.toMathMLattributes();if("mspace"===c)return a+"<"+c+d+" />";for(var e=[],f=this.isToken?"":a+(b?"":"  "),g=0,h=this.data.length;g<h;g++)this.data[g]?e.push(this.data[g].toMathML(f)):this.isToken||this.isChars||e.push(f+"<mrow />");return this.isToken?a+"<"+c+d+">"+e.join("")+"</"+c+">":b?e.join("\n"):0===e.length||1===e.length&&""===e[0]?a+"<"+c+d+" />":a+"<"+c+d+">\n"+e.join("\n")+"\n"+a+"</"+c+">"},toMathMLattributes:function(){var b=[],c=this.defaults,d=this.attrNames||a.copyAttributeNames,e=a.skipAttributes;if("math"!==this.type||this.attr&&this.attr.xmlns||b.push("xmlns=\"http://www.w3.org/1998/Math/MathML\""),!this.attrNames)for(var f in"mstyle"===this.type&&(c=a.math.prototype.defaults),c)if(!e[f]&&c.hasOwnProperty(f)){var g="open"==f||"close"==f||"form"==f;if(null!=this[f]&&(g||this[f]!==c[f])){var h=this[f];delete this[f],(g||this.Get(f)!==h)&&b.push(f+"=\""+this.toMathMLattribute(h)+"\""),this[f]=h}}for(var j=0,i=d.length;j<i;j++)"class"!==d[j]&&(h=(this.attr||{})[d[j]],null==h&&(h=this[d[j]]),null!=h&&b.push(d[j]+"=\""+this.toMathMLquote(h)+"\""));return this.toMathMLclass(b),b.length?" "+b.join(" "):""},toMathMLclass:function(b){var c=[];if(this["class"]&&c.push(this["class"]),this.isa(a.TeXAtom)&&SETTINGS.texHints){var d=["ORD","OP","BIN","REL","OPEN","CLOSE","PUNCT","INNER","VCENTER"][this.texClass];d&&c.push("MJX-TeXAtom-"+d)}this.mathvariant&&this.toMathMLvariants[this.mathvariant]&&c.push("MJX"+this.mathvariant),this.variantForm&&c.push("MJX-variant"),c.length&&b.unshift("class=\""+c.join(" ")+"\"")},toMathMLattribute:function(a){if("string"==typeof a&&a.replace(/ /g,"").match(/^(([-+])?(\d+(\.\d*)?|\.\d+))mu$/))return RegExp.$2+(1/18*RegExp.$3).toFixed(3).replace(/\.?0+$/,"")+"em";return this.toMathMLvariants[a]?this.toMathMLvariants[a]:this.toMathMLquote(a)},toMathMLvariants:{"-tex-caligraphic":a.VARIANT.SCRIPT,"-tex-caligraphic-bold":a.VARIANT.BOLDSCRIPT,"-tex-oldstyle":a.VARIANT.NORMAL,"-tex-oldstyle-bold":a.VARIANT.BOLD,"-tex-mathit":a.VARIANT.ITALIC},toMathMLquote:function(a){a=(a+"").split("");for(var b,d=0,e=a.length;d<e;d++)if(b=a[d].charCodeAt(0),55295>=b||57344<=b){if(32>b||126<b)a[d]="&#x"+b.toString(16).toUpperCase()+";";else{var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"}[a[d]];f&&(a[d]=f)}}else if(d+1<e){var c=a[d+1].charCodeAt(0),g=(b-55296<<10)+(c-56320)+65536;a[d]="&#x"+g.toString(16).toUpperCase()+";",a[d+1]="",d++}else a[d]="";return a.join("")}}),a.msubsup.Augment({toMathML:function(a){var b=this.type;null==this.data[this.sup]&&(b="msub"),null==this.data[this.sub]&&(b="msup");var c=this.toMathMLattributes();delete this.data[0].inferred;for(var d=[],e=0,f=this.data.length;e<f;e++)this.data[e]&&d.push(this.data[e].toMathML(a+"  "));return a+"<"+b+c+">\n"+d.join("\n")+"\n"+a+"</"+b+">"}}),a.munderover.Augment({toMathML:function(a){var b=this.type;null==this.data[this.under]&&(b="mover"),null==this.data[this.over]&&(b="munder");var c=this.toMathMLattributes();delete this.data[0].inferred;for(var d=[],e=0,f=this.data.length;e<f;e++)this.data[e]&&d.push(this.data[e].toMathML(a+"  "));return a+"<"+b+c+">\n"+d.join("\n")+"\n"+a+"</"+b+">"}}),a.TeXAtom.Augment({toMathML:function(a){var b=this.toMathMLattributes();return b||1!==this.data[0].data.length?a+"<mrow"+b+">\n"+this.data[0].toMathML(a+"  ")+"\n"+a+"</mrow>":a.substr(2)+this.data[0].toMathML(a)}}),a.chars.Augment({toMathML:function(a){return(a||"")+this.toMathMLquote(this.toString())}}),a.entity.Augment({toMathML:function(a){return(a||"")+"&"+this.data[0]+";<!-- "+this.toString()+" -->"}}),a.xml.Augment({toMathML:function(a){return(a||"")+this.toString()}}),MathJax.Hub.Register.StartupHook("TeX mathchoice Ready",function(){a.TeXmathchoice.Augment({toMathML:function(a){return this.Core().toMathML(a)}})}),MathJax.Hub.Startup.signal.Post("toMathML Ready")}),MathJax.Ajax.loadComplete("[MathJax]/extensions/toMathML.js");