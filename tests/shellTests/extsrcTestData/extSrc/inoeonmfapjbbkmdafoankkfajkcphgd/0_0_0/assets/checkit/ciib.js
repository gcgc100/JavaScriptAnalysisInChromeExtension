(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define([],b):'object'==typeof exports?exports.texthelpcheckit=b():a.texthelpcheckit=b()})('undefined'==typeof self?this:self,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=13)}({13:function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});c(14);class d{constructor(){chrome.runtime.onMessageExternal.addListener((a,b,c)=>{if('FR_P_1342_CK'===a.type)return this[a.method](a,b,c),!0}),this._dictionaryWords=[],this._language='en_US'}onCheckitRequest(a,b,c){this.onCheckit(a.textDetails,a.id,a.hash,a.metaData,c)}onLanguageChanged(a){this._language=a.language}onCheckit(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:'',c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:'',d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},e=4<arguments.length&&arguments[4]!==void 0?arguments[4]:null;chrome.permissions.contains({permissions:['management']},function(f){return f?void chrome.management.get('idbpbkgkmoocopfjaicknclaglcodiem',function(f){var g=!1;!chrome.runtime.lastError&&void 0!==f&&f.enabled&&(g=!0),this._onCheckit(a,b,c,d,e,g)}.bind(this)):void this._onCheckit(a,b,c,d,e,!1)}.bind(this))}_onCheckit(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:'',c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:'',d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},e=4<arguments.length&&arguments[4]!==void 0?arguments[4]:null,f=5<arguments.length&&arguments[5]!==void 0&&arguments[5],g='https://'+texthelp.CheckitLib.CHECKITSETTINGS.CHECKITDOM;f&&(g='https://'+texthelp.CheckitLib.CHECKITSETTINGS.CHECKITTEST);var h='https://'+texthelp.CheckitLib.CHECKITSETTINGS.SPELLINGDOM,i=/(?<=[\u000A])/g,j=a.textWithoutSpecialChars.split(i),k=0,l=[],m=[];j.forEach((a)=>{m.push(a.replace(/\u000A/g,' ')),l.push(k),k+=a.length});var n={username:texthelp.CheckitLib.CHECKITSETTINGS.CHECKITUSER,apiKey:texthelp.CheckitLib.CHECKITSETTINGS.CHECKITHASH,language:this._language,textArray:m,disableSpellCheck:!0,disabledRules:'WHITESPACE_RULE'},o=fetch(g,{method:'post',headers:{Accept:'application/json'},body:JSON.stringify(n)}),p=a.textWithoutSpecialChars.replace(/\u000A/g,' ').split(/([\s])/);p=p.filter((a)=>0<a.length);var q='{"u":'+texthelp.CheckitLib.CHECKITSETTINGS.SPELLINGUSER+',"e":'+texthelp.CheckitLib.CHECKITSETTINGS.SPELLINGHASH+',"b":'+JSON.stringify(p)+',"r":"c", "l":"'+this._language+'"}',r=new FormData;r.append('json',q);var s=fetch(h,{method:'post',headers:{dataType:'json',contentType:'application/json; charset=utf-8',accept:'application/json'},body:r}),t=Promise.all([o,s]).then((a)=>Promise.all(a.map((a)=>a.json())));t.then(function(f){var g=f[0],h=f[1].spellingErrors;h=h.filter((a)=>0==a.word.length&&0==a.usedWord.length&&0==a.multiSpellingErrors.length?!1:!0);var j=[];j.push(g.results[0]);for(var k=['WHITESPACE_RULE'],m=function(a){var b=l[a];g.results[a].matches.forEach((a)=>{a.offset+=b,0>k.indexOf(a.rule.id)&&j[0].matches.push(a)})},n=1;n<g.results.length;n++)m(n);h.forEach(function(a){var b=p.slice(0,parseInt(a.index)).join('').length,c={};c.word=a.usedWord,c.message='Possible spelling mistake found',c.shortMessage='Spelling mistake',c.replacements=[],c.offset=b+parseInt(a.wordStartIndex),c.length=parseInt(a.wordLength),c.rule={},c.rule.id='MORFOLOGIK_RULE_EN_US',c.rule.description='Possible spelling mistake',c.rule.issueType='misspelling',c.rule.id='MORFOLOGIK_RULE_EN_US',c.rule.category={},c.rule.category.id='TYPOS',c.rule.category.name='Possible Typo',j[0].matches.push(c)}.bind(this)),j[0].matches.sort((c,a)=>c.offset-a.offset),e({method:'onCheckitRequest',type:'FR_P_1343_CK',id:b,hash:c,textDetails:a,metaData:d,payload:j[0]})}.bind(this))}onGetSpellingSuggestions(a,b,c){var d=[a.word],e='{"u":'+texthelp.CheckitLib.CHECKITSETTINGS.SPELLINGUSER+',"e":'+texthelp.CheckitLib.CHECKITSETTINGS.SPELLINGHASH+',"b":'+JSON.stringify(d)+',"r":"s","m":"5","l":"'+this._language+'"}',f='https://'+texthelp.CheckitLib.CHECKITSETTINGS.SPELLINGDOM+'?json=';fetch(f+encodeURIComponent(e),{method:'post',headers:{Accept:'application/json'}}).then((a)=>a.json()).then((b)=>{var d={};1>b.spellingErrors.length?(d.word=a.word,d.suggestions=[]):(d.word=b.spellingErrors[0].word,d.suggestions=b.spellingErrors[0].suggestions),c({method:'onSpellingSuggestions',type:'1757FROM_BGRW4G',payload:d})})}onGetSavedIgnoreLists(a,b,c){this.loadIgnoredItems((a)=>{this._dictionaryWords=a;var b={};b.dictionaryWords=this._dictionaryWords,c({method:'onGetSavedIgnoreLists',type:'1757FROM_BGRW4G',payload:b})})}onAddToDictionaryWords(a){void 0==a.wordToIgnore||1>a.wordToIgnore.length||this._dictionaryWords.includes(a.wordToIgnore)||(this._dictionaryWords.push(a.wordToIgnore),this.saveDictionary())}onUpdateDictionaryItems(a,b,c){void 0==a.dictionary||0>a.dictionary.length||(this._dictionaryWords=a.dictionary,c({method:'onDictionaryIgnoreList',type:'1757FROM_BGRW4G',payload:this._dictionaryWords}),this.saveDictionary())}saveDictionary(){chrome.storage.sync.set({texthelpdictionaryItems:this._dictionaryWords})}loadIgnoredItems(a){chrome.storage.sync.get({texthelpdictionaryItems:[]},function(b){null==b.texthelpdictionaryItems&&(b.texthelpdictionaryItems=defaultBar),null!==a&&a(b.texthelpdictionaryItems)})}}b.default=d;new d},14:function(a,b,c){'use strict';(function(a){// distribute, sublicense, and/or sell copies of the Software, and to permit
function c(a,b){for(var c,d=0,e=a.length-1;0<=e;e--)c=a[e],'.'===c?a.splice(e,1):'..'===c?(a.splice(e,1),d++):d&&(a.splice(e,1),d--);if(b)for(;d--;d)a.unshift('..');return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,g=function(a){return e.exec(a).slice(1)};b.resolve=function(){for(var b,e='',f=!1,g=arguments.length-1;-1<=g&&!f;g--){if(b=0<=g?arguments[g]:a.cwd(),'string'!=typeof b)throw new TypeError('Arguments to path.resolve must be strings');else if(!b)continue;e=b+'/'+e,f='/'===b.charAt(0)}return e=c(d(e.split('/'),function(a){return!!a}),!f).join('/'),(f?'/':'')+e||'.'},b.normalize=function(a){var e=b.isAbsolute(a),g='/'===f(a,-1);return a=c(d(a.split('/'),function(a){return!!a}),!e).join('/'),a||e||(a='.'),a&&g&&(a+='/'),(e?'/':'')+a},b.isAbsolute=function(a){return'/'===a.charAt(0)},b.join=function(){var a=Array.prototype.slice.call(arguments,0);return b.normalize(d(a,function(a){if('string'!=typeof a)throw new TypeError('Arguments to path.join must be strings');return a}).join('/'))},b.relative=function(a,c){function d(a){for(var b=0;b<a.length&&''===a[b];b++);for(var c=a.length-1;0<=c&&''===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=b.resolve(a).substr(1),c=b.resolve(c).substr(1);for(var e=d(a.split('/')),f=d(c.split('/')),g=Math.min(e.length,f.length),h=g,j=0;j<g;j++)if(e[j]!==f[j]){h=j;break}for(var i=[],j=h;j<e.length;j++)i.push('..');return i=i.concat(f.slice(h)),i.join('/')},b.sep='/',b.delimiter=':',b.dirname=function(a){var b=g(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):'.'},b.basename=function(a,b){var c=g(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},b.extname=function(a){return g(a)[3]};var f=function(a,b,c){return a.substr(b,c)}}).call(b,c(15))},15:function(a){'use strict';function b(){throw new Error('setTimeout has not been defined')}function c(){throw new Error('clearTimeout has not been defined')}function d(a){if(j===setTimeout)return setTimeout(a,0);if((j===b||!j)&&setTimeout)return j=setTimeout,setTimeout(a,0);try{return j(a,0)}catch(b){try{return j.call(null,a,0)}catch(b){return j.call(this,a,0)}}}function e(a){if(k===clearTimeout)return clearTimeout(a);if((k===c||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(a);try{return k(a)}catch(b){try{return k.call(null,a)}catch(b){return k.call(this,a)}}}function f(){o&&m&&(o=!1,m.length?n=m.concat(n):p=-1,n.length&&g())}function g(){if(!o){var a=d(f);o=!0;for(var b=n.length;b;){for(m=n,n=[];++p<b;)m&&m[p].run();p=-1,b=n.length}m=null,o=!1,e(a)}}function h(a,b){this.fun=a,this.array=b}function i(){}var j,k,l=a.exports={};(function(){try{j='function'==typeof setTimeout?setTimeout:b}catch(a){j=b}try{k='function'==typeof clearTimeout?clearTimeout:c}catch(a){k=c}})();var m,n=[],o=!1,p=-1;l.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];n.push(new h(a,b)),1!==n.length||o||d(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}}})});