{"version":3,"sources":["chrome/src/bg/background.js"],"names":["Background","extId","user","preferences","savings","lookupConfig","sender","self","this","tabId","tab","id","tabUrl","url","host","Url","getHost","auth","getUser","hasOwnProperty","$","getJSON","Config","server","encodeURIComponent","Math","random","getExtId","data","ruleset","codes","codeDetails","cashback","cookieDomain","flags","earnings","window","afSrc","Object","suppressPrompts","Array","chrome","tabs","sendMessage","action","setUser","apiKey","setSavings","setBadge","length","get","browserAction","setBadgeBackgroundColor","color","setIcon","path","setBadgeText","text","toString","setPopup","popup","broadcast","broadcastAll","query","i","initStorage","callback","storage","local","CoFund","Info","setExtId","randomId","_getRandomId","set","_cofund.id","console","log","hasReviewed","_cofund.hasReviewed","reviewTimeLimit","_cofund.reviewTimeLimit","appKey","extend","defaultPreferences","JSON","parse","setPreferences","parseFloat","_cofund.auth","_cofund.appKey","app_key","_cofund.earnings","clearUser","remove","getPreferences","fullPreferences","_cofund.preferences","stringify","getSavings","_cofund.savings","addSavings","storeId","offerId","ajax","type","s","o","domain","s4","floor","substring","runtime","onMessage","addListener","request","sendResponse","state","executeScript","code","script","lastError","Events","logProviderError","message","cache","timeout","ajaxTimeouts","cashbackPixel","success","response","status","$xhr","logCashbackFired","error","logCashbackFireFailed","create","active","openerTabId","waitFor","backgroundPixel","setTimeout","Date","now","token","apiToken","app_uid","has_reviewed","onUpdated","changeInfo","onClicked","onInstalled","details","reason","version","results","setUninstallURL","webRequest","onBeforeRequest","indexOf","urls"],"mappings":"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","file":"chrome-minified/src/bg/background.js"}